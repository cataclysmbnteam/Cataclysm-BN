# ゲームファイルとセーブデータの破損

ゲームファイルとセーブデータの破損は、以下のカテゴリに分類されます：

1. システムに起因するもの
2. ランチャーに起因するもの
3. ゲームに起因するもの
4. 不適切なアップグレード手順に起因するもの
5. キャラクターの死亡に起因するもの

## システムに起因する破損

### 一般的な症状

- セーブデータをロードしようとすると、意味不明なエラーメッセージが表示される（例：「カンマが必要です」や「配列が必要です」）
- 問題のあるファイルを適切なテキストエディタ（WindowsユーザーならNotepad++）で開くと、部分的にゼロバイトやその他の意味不明な文字列で埋め尽くされている
  ![image](https://user-images.githubusercontent.com/60584843/186019683-36a59d3b-31ce-408c-96ee-42390975171c.png)

### 一般的な原因と回避方法

1. ディスク容量不足（より大きなディスクを購入する）
2. ディスクの故障（新しいディスクを購入する）
3. USBメモリや外付けハードドライブに保存し、「安全な取り外し」を行わずに引き抜く（これはやめましょう）
4. 停電（コンピュータ用のUPSを購入する）
5. ハードウェア障害による電力損失（PC修理業者を呼ぶ）
6. ユーザーの操作による電力損失（PCの電源プラグを抜かない、電源ボタンの長押しでラップトップをシャットダウンしない）
7. ブルースクリーンまたは同様の回復不可能なOSエラー（これもPC修理業者を呼ぶ）

### 破損の修復

これについては私たちにできることはありませんが、OSのファイルバックアップ機能（または、バックアップも破損していない場合はゲームランチャーのバックアップ機能）を試すことができます。

## ランチャーに起因する破損

### 一般的な症状

1. すべて（または一部）のセーブデータが突然消える
2. `[game root]/data/` 内のすべて（または一部）の個人的な調整が突然元に戻る
3. すべて（または一部）のMod/サウンドパックが突然消える
4. すべて（または一部）の設定がデフォルトにリセットされる

### 一般的な原因と回避方法

1. ランチャーにバグがある。作者/メンテナに修正を依頼するか、別のランチャーを探す - おそらく[ユーザーデータに触れないようにするもの](https://github.com/qrrk/Catapult)が良いでしょう。
2. Mod/サウンドパック/個人的な調整が `[game root]/data/` フォルダ内にあった。そのフォルダはベースゲーム専用のものなので、アップデート後に上書き/消去/破損しても驚かないでください。特にこの状況を避けるために、ゲームではこれらのファイルをいわゆる「ユーザー」フォルダに配置することができます - Windowsでは、`[game root]/mods/` および `[game root]/sound/` という名前のフォルダになります。すべての個人的な調整は、同じ `[game root]/mods/` フォルダに配置された専用のModに入れるべきであり、Modシステムの制限によりそれが不可能な場合は、ランチャーがそれをゴミとして扱うのを避けるために、できれば `[game root]/` から離れた場所にバックアップ形式で保管してください。
3. ランチャーには癖があるかもしれません。たとえば、人気のあるランチャーの最近のアップデートの1つには大きな警告がありましたが、一部の人々はそれを無視することにしました。ここでのアドバイスも同様で、作者/メンテナにこれらを解決するように依頼するか（移行を追加する？）、単により注意深くなることです。
   ![image](https://user-images.githubusercontent.com/60584843/186022055-0015f2cc-2549-4721-8a0d-8b7047b3d2b1.png)

### 破損の修復

これについても私たちにできることはあまりありません。ランチャーの作成者に修正を依頼するか、OSのバックアップを試してください。

## ゲームに起因する破損

### 一般的な症状

1. セーブデータをロードするたびに、奇妙だがゲームの進行を妨げない何かが起こる（死ぬ、10kg痩せる、NPCの仲間がテレポートするなど）
2. セーブデータをロードするたびに、ゲームが失われたアイテムの場所について叫ぶ

### 一般的な原因と回避方法

これらはゲームのバグであり、回避するのではなく修正されるべきです。私たちが知らないものを修正することはできないため、バグは報告される必要があります - GitHubで[バグレポート](https://github.com/cataclysmbn/Cataclysm-BN/issues/new/choose)を作成するか（GitHubアカウントを作成するには有効なメールアドレスが必要なだけです、それほど難しくはありません）、[私たちのDiscordサーバー](https://discord.gg/XW7XhXuZ89)に参加して `#development` チャンネルで不満を言うことで - おそらくそこでより速い応答が得られるでしょう。修正方法を知っている場合（または挑戦してみたい場合） - 助けはいつでも歓迎されます。

### 破損の修復

これらの場合のセーブデータは通常修復可能ですが、正確な方法はケースバイケースで異なります。

ゲームが `ACT_XXX lost target item` や `item_location lost target during save/load cycle` のような赤と黒のメッセージを表示している場合は、セーブデータのバックアップを作成してから、キャラクターのセーブファイル（通常は `[game root]/save/[World Name]/#[gibberish].sav`）を適切なテキストエディタ（Windowsの場合はNotepad++で大丈夫です）で開き、`ACT_` で始まるシーケンス（例：`ACT_DROP` や `ACT_WASH`）のすべての出現箇所を見つけて、それらを `ACT_NULL` に置き換えてみてください。

## 不適切なアップグレード手順に起因する破損

### 一般的な症状

1. 手動アップデート後、Modを使用していなくても、誰も知らない、または経験していない奇妙なエラーが表示される。
2. ゲームのクリーン再インストール後にエラーが消える。

### 一般的な原因と回避方法

おそらく、新しいバージョンをダウンロードして既存のインストールの上に解凍することでゲームをアップデートしています。**これはサポートされておらず、これまでもサポートされたことはありません。** プログラムが明示的にこれを処理でき、許可されていると述べていない限り、プログラムをこのようにアップデートすることは一般的に悪い考えです。BNはこれを処理できません。同じ方法でダウンロードしてアップグレードしたModも、おそらくこれを処理できません。

### 破損の修復

クリーン再インストールを行うか、ランチャーを使用してください。

## キャラクターの死亡に起因する破損

### 一般的な症状

キャラクターが死にました - それは悲劇であり、古き良き時代に時間を戻せたらいいのにと思います。
そして、Alt+F4を押すことでまさにそれができることに気づきます。しかし、次にセーブデータをロードすると、すべてのアイテムが複製された死体が近くにあり、車両はどこにも見当たりません。

### 一般的な原因と回避方法

あなたは死を欺こうとしましたが失敗し、最終的に大災厄で失われた何十億もの人々の中に忘れ去られました。

### 破損の修復

あなたは自分の過ちの記憶と共に生きなければなりません。次回はセーブデータのバックアップを取るようにしてください。
技術的にはバグですが、簡単な逃げ道でもあるため、誰も修正しようとは思いません。
